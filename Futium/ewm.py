x = [137.68500137329102, 137.8637466430664, 137.88999938964844, 137.9199981689453, 137.76874923706055, 
     137.56124877929688, 137.4774932861328, 137.3687515258789, 137.2150001525879, 137.14500045776367, 
     137.05749893188477, 136.9499969482422, 136.86999893188477, 136.8025016784668, 136.86749649047852, 
     136.86500549316406, 136.93250274658203, 137.04125213623047, 137.08499908447266, 137.0399932861328, 
     137.06500244140625, 136.90750122070312, 136.95449829101562, 136.89999389648438, 136.98999404907227, 
    
    ]


def trad_ema():
    ema = []
    # just set the first value of ema to the current price bc we cant calculate it any further back
    ema.append(x[0])
    N = len(x)
    for i in range(1, len(x)):
        # it's i + 1 bc its the first 1 not the first 0 which results in nothing
        current_price = x[:i+1]
        
        # EMA(t) = Price(t) x k + EMA(t-1) x (1-k)
        # where t IS today; y IS yesterday; k = 2 / (N + 1); N is number of days in EMA
        k = 2 / (N + 1)

        val = (current_price[i] * k) + (ema[i-1] * (1 - k))

        ema.append(val)
        
    return(ema)

def panda_ema():
    ema = []
    a = 0.5
    b = 1-a

    for n in range(len(x)):
        y = x[0]
        ema.append(y)
    # y(t) = x(t) + (1-a)^1 * x(t-1) + (1-a)^2 * x(t-2) + ... + (1-a)^t * x(0)
    #        -----------------------------------------------------------------
    #                       1 + (1-a) + (1-a)^2 + ... + (1-a)^t
    # where y(t) IS EMA; x(t) IS current price; x(t-1) IS (current - 1) price...; a = alpha (can be modified many ways)
    
    # (1-a) = B
    # t = 0 #   y(0) = x[0]
    # t = 1 #   y(1) = x[1] + B^1 * x[0]
    # t = 2 #   y(2) = x[2] + B^1 * x[1] + B^2 * x[0]  


print(trad_ema())






































    #  136.96508026123047, 136.9199981689453, 136.92569732666016, 136.87374877929688, 136.90875244140625, 136.80999755859375, 136.85000610351562, 
    #  137.0124969482422, 137.11499786376953, 137.10250091552734, 137.06999588012695, 137.00999450683594, 137.06250381469727, 136.94499969482422, 136.8400001525879, 
    #  136.82000732421875, 136.76250076293945, 136.76625061035156, 136.77749633789062, 136.77499771118164, 136.8182029724121, 136.82815170288086, 136.88249588012695, 
    #  136.86199951171875, 136.91375350952148, 136.875, 136.92374801635742, 136.97624969482422, 136.86750030517578, 136.89374542236328, 136.97999572753906, 136.99500274658203, 
    #  137.11042404174805, 137.16375350952148, 137.15499877929688, 137.21499633789062, 137.1412467956543, 136.8625030517578, 136.79124450683594, 136.83499908447266, 
    #  136.86500549316406, 136.88375091552734, 136.83834838867188, 136.72624588012695, 136.71999740600586, 136.78750228881836, 136.93250274658203, 137.01749801635742, 
    #  137.0050048828125, 136.99750518798828, 136.9987449645996, 137.00375366210938, 137.03624725341797, 137.08250427246094, 137.02999877929688, 136.98500442504883, 
    #  136.94499969482422, 137.02375411987305, 137.01749801635742, 137.0500030517578, 137.05749893188477, 137.0925064086914, 137.125, 137.2099952697754, 137.2249984741211, 
    #  137.2537498474121, 137.2699966430664, 137.30749893188477, 137.32000732421875, 137.2775001525879, 137.3175048828125, 137.29249572753906, 137.30999755859375, 
    #  137.30999755859375, 137.2675018310547, 137.27999877929688, 137.25749969482422, 137.21125030517578, 137.20000076293945, 137.1875, 137.13999938964844, 137.16000366210938, 
    #  137.1125030517578, 137.07000732421875, 137.0175018310547, 136.9749984741211, 137.04000091552734, 137.00750350952148, 137.0262451171875, 136.97750091552734, 
    #  137.07374572753906, 137.12000274658203, 137.12374877929688, 137.08124542236328, 137.05500030517578, 137.1199951171875, 137.0712432861328, 136.98624801635742, 
    #  136.99750137329102, 136.8849983215332, 136.96750259399414, 136.92499923706055, 136.94499588012695, 137.02875137329102, 137.1425018310547, 137.15249633789062, 
    #  137.13249969482422, 137.13747024536133, 137.1362533569336, 137.13235092163086, 137.06625366210938, 137.00500106811523, 137.06999969482422, 137.08999633789062, 
    #  136.98749923706055, 136.96749877929688, 136.98125457763672, 137.06000518798828, 137.06937408447266, 137.12250137329102, 137.17374420166016, 137.2349967956543, 
    #  137.2442970275879, 137.24750137329102, 137.14630508422852, 137.14749908447266, 137.01625061035156, 136.92999267578125, 137.01499938964844, 137.0500030517578, 
    #  137.08375549316406, 137.12875366210938, 137.14874649047852, 137.0525016784668, 137.0199966430664, 137.0150032043457, 137.0275001525879, 137.07250213623047, 
    #  137.07750701904297, 137.10750198364258, 137.09500122070312, 137.16000366210938, 137.125, 137.16250228881836, 137.17250442504883, 137.2100067138672, 137.27874755859375, 
    #  137.28374481201172, 137.27375030517578, 137.3224983215332, 137.28374862670898, 137.29249572753906, 137.30749893188477, 137.3091278076172, 137.32874298095703, 
    #  137.34250259399414, 137.37625122070312, 137.38750076293945, 137.34249877929688, 137.32634735107422, 137.32250595092773, 137.35000228881836, 137.3537483215332, 
    #  137.38750076293945, 137.5037498474121, 137.4900016784668, 137.4512481689453, 137.38499450683594, 137.35750579833984, 137.27000427246094, 137.29874420166016, 
    #  137.1999969482422, 137.18999862670898, 137.2050018310547, 137.27625274658203, 137.25, 137.19375228881836, 137.20750427246094, 137.23500061035156, 137.2449951171875, 
    #  137.26625442504883, 137.2928466796875, 137.31500625610352, 137.35374450683594, 137.41250228881836, 137.47125244140625, 137.4574966430664, 137.4775047302246, 
    #  137.41000366210938, 137.43499755859375, 137.52249908447266, 137.43750381469727, 137.61999893188477, 137.6737518310547, 137.7550048828125, 137.75, 137.75, 
    #  137.80249786376953, 137.86000061035156, 137.9175033569336, 137.8400001525879, 137.86249923706055, 137.90499877929688, 137.96625137329102, 138.04249954223633, 
    #  138.03749465942383, 138.03750228881836, 138.00749588012695, 137.9025001525879, 137.89750289916992, 138.0324935913086, 138.04000091552734, 138.0124969482422, 
    #  137.93000030517578, 137.90749740600586, 137.91499710083008, 137.90250396728516, 137.90999603271484, 137.9149932861328, 137.86750030517578, 137.92249298095703, 
    #  137.89374542236328, 137.8699951171875, 137.89999771118164, 137.8949966430664, 137.9124984741211, 137.92249298095703, 137.89249420166016, 137.94249725341797, 
    #  137.93499374389648, 138.01249313354492, 137.98250579833984, 138.0, 138.00749588012695, 138.00749588012695, 137.94750213623047, 137.95525360107422, 137.93499755859375, 
    #  137.95000457763672, 137.93000030517578, 137.8800048828125, 137.8025016784668, 137.77000427246094, 137.86499786376953, 137.8900032043457, 137.86999893188477, 
    #  137.8650016784668, 137.78374862670898, 137.77499771118164, 137.74750137329102, 137.74000549316406, 137.7125015258789, 137.76250076293945, 137.82000350952148, 
    #  137.80999755859375, 137.87500381469727, 137.88000106811523, 137.92999649047852, 137.9900016784668, 138.01749801635742, 138.03999710083008, 137.92250061035156, 
    #  137.93499755859375, 137.9124984741211, 137.8925018310547, 137.94499969482422, 137.92749786376953, 137.9937515258789, 138.08374786376953, 138.0762481689453, 
    #  138.06500244140625, 138.04249954223633, 138.0150032043457, 137.8224983215332, 137.77375411987305, 137.70187377929688, 137.68924713134766, 137.65999603271484, 
    #  137.61000061035156, 137.5175018310547, 137.53000259399414, 137.68750381469727, 137.74749755859375, 137.74999618530273, 137.72000122070312, 137.71375274658203, 
    #  137.71750259399414, 137.80999755859375, 137.78374481201172, 137.8249969482422, 137.83499908447266, 137.81749725341797, 137.81895446777344, 137.80500030517578, 
    #  137.73500061035156, 137.67999267578125, 137.65500259399414, 137.61375045776367, 137.56825256347656, 137.58250427246094, 137.5299949645996, 137.54874801635742, 
    #  137.53249740600586, 137.6050033569336, 137.60250091552734, 137.625, 137.58124923706055, 137.67000198364258, 137.71874618530273, 137.71537399291992, 137.76250457763672, 
    #  137.79000091552734, 137.84500122070312, 137.86499786376953, 137.90499877929688, 137.95000076293945, 137.90250396728516, 137.90500259399414, 137.87124633789062, 
    #  137.88249588012695, 137.77874755859375, 137.74249649047852, 137.7125015258789, 137.7275047302246, 137.67000198364258, 137.67499542236328, 137.67250061035156, 
    #  137.7074966430664, 137.73125457763672, 137.7643699645996, 137.79500579833984, 137.8487548828125, 137.79249954223633, 137.79999923706055, 137.8324966430664, 
    #  137.83999633789062, 137.87250137329102, 137.83250045776367, 137.82000350952148, 137.79000091552734, 137.87874603271484, 137.98999786376953, 138.0325, 138.03, 
    #  138.03, 136.98, 137.5855, 138.03, 138.03